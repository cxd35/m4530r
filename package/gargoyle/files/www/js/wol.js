/*
 * This program is copyright � 2008-2012 Eric Bishop and is distributed under the terms of the GNU GPL
 * version 2.0 with a special clarification/exception that permits adapting the program to
 * configure proprietary "back end" software provided that all modifications to the web interface
 * itself remain covered by the GPL.
 * See http://gargoyle-router.com/faq.html#qfoss for more information
 */function initWolTable(){var a=[],b=[];initializeDescriptionVisibility(uciOriginal,"wol_help"),uciOriginal.removeSection("gargoyle","help"),arpLines.shift();var c=0;for(c=0;c<arpLines.length;c++){var d=arpLines[c],e=d.split(/[\t ]+/),f=e[3].toUpperCase(),g=e[0];a.push([getHostname(g),g,f,createWakeUpButton()]),b[g]=1}for(c=0;c<dhcpLeaseLines.length;c++){var h=dhcpLeaseLines[c],i=h.split(/[\t ]+/),f=i[1].toUpperCase(),g=i[2];b[g]==null&&(a.push([getHostname(g),g,f,createWakeUpButton()]),b[g]=1)}for(c=0;c<etherData.length;c++){var j=etherData[c],f=j[0].toUpperCase(),g=j[1];b[g]==null&&(a.push([getHostname(g),g,f,createWakeUpButton()]),b[g]=1)}sort2dStrArr(a,1);var k=["主机名","IP","MAC",""],l=createTable(k,a,"wol_table",!1,!1),m=document.getElementById("wol_table_container");m.firstChild!=null&&m.removeChild(m.firstChild),m.appendChild(l)}function sort2dStrArr(a,b){var c=function(a,c){return a[b]==c[b]?0:a[b]<c[b]?-1:1};a.sort(c)}function getHostname(a){var b=ipToHostname[a]==null?"(unknown)":ipToHostname[a];return b=b.length<25?b:b.substr(0,22)+"...",b}function createWakeUpButton(){var a=createInput("button");return a.value="唤醒",a.className="default_button",a.onclick=wakeHost,a}function wakeHost(){getRow=this.parentNode.parentNode;var a=getRow.childNodes[2].firstChild.data,b=["wol -i "+bcastIp+" "+a];commands=b.join("\n");var c=getParameterDefinition("commands",commands)+"&"+getParameterDefinition("hash",document.cookie.replace(/^.*hash=/,"").replace(/[\t ;]+.*$/,""));runAjax("POST","utility/run_commands.sh",c,function(){return 0}),alert("唤醒请求已发送.")};