/*
 * This program is copyright � 2008-2010 Eric Bishop and is distributed under the terms of the GNU GPL 
 * version 2.0 with a special clarification/exception that permits adapting the program to 
 * configure proprietary "back end" software provided that all modifications to the web interface
 * itself remain covered by the GPL. 
 * See http://gargoyle-router.com/faq.html#qfoss for more information
 */function createTable(a,b,c,d,e,f,g,h){h=h==null?document:h;var j=h.createElement("table"),k=h.createElement("tbody");j.appendChild(k),j.id=c;var l=h.createElement("tr");l.className="header_row",k.appendChild(l);var m;for(m=0;m<a.length;m++){var n=h.createElement("th");if(typeof a[m]=="string"){var o=a[m].split(/\n/);while(o.length>0){var p=o.shift();n.appendChild(h.createTextNode(p)),o.length>0&&n.appendChild(h.createElement("br"))}}else n.appendChild(a[m]);headerContent=typeof a[m]=="string"?h.createTextNode(a[m]):a[m],l.appendChild(n)}if(d){var n=h.createElement("th");headerContent=h.createTextNode(""),n.appendChild(headerContent),l.appendChild(n)}if(e)for(i=1;i<2;i++){var n=h.createElement("th");headerContent=h.createTextNode(""),n.appendChild(headerContent),l.appendChild(n)}if(b!=null)for(rowIndex in b)addTableRow(j,b[rowIndex],d,e,f,g);return tableSanityCheck(j),j}function addTableRow(a,b,c,d,e,f,g){g=g==null?document:g,e=e==null?function(){}:e,f=f==null?function(){}:f,row=g.createElement("tr"),tableBody=a.firstChild,numRows=tableBody.rows.length,tableBody.appendChild(row),cellIndex=1;while(cellIndex<=b.length){cell=g.createElement("td");if(typeof b[cellIndex-1]=="string"){var h=b[cellIndex-1].split(/\n/);while(h.length>0){var i=h.shift();cell.appendChild(g.createTextNode(i)),h.length>0&&cell.appendChild(g.createElement("br"))}}else cell.appendChild(b[cellIndex-1]);cell.className=a.id+"_column_"+cellIndex,row.appendChild(cell),cellIndex++}c&&(cellContent=createInput("button",g),cellContent.value="删除",cellContent.className="default_button",cellContent.onclick=function(){row=this.parentNode.parentNode,a=row.parentNode.parentNode,removeThisCellsRow(this),e(a,row)},cell=g.createElement("td"),cell.className=a.id+"_column_"+cellIndex,cell.appendChild(cellContent),row.appendChild(cell),cellIndex++),d&&(cellContent=createInput("button",g),cellContent.value=String.fromCharCode(8593),cellContent.className="default_button",cellContent.onclick=function(){moveThisCellsRowUp(this),f(this,"up")},cell=g.createElement("td"),cell.className=a.id+"_column_"+cellIndex,cell.appendChild(cellContent),row.appendChild(cell),cellIndex++,cellContent=createInput("button",g),cellContent.value=String.fromCharCode(8595),cellContent.className="default_button",cellContent.onclick=function(){moveThisCellsRowDown(this),f(this,"down")},cell=g.createElement("td"),cell.className=a.id+"_column_"+cellIndex,cell.appendChild(cellContent),row.appendChild(cell),cellIndex++),row.className=numRows%2==0?"even":"odd",tableSanityCheck(a)}function removeThisCellsRow(a){row=a.parentNode.parentNode,tableBody=row.parentNode,tableBody.removeChild(row),setRowClasses(tableBody.parentNode,!0)}function moveThisCellsRowUp(a){row=a.parentNode.parentNode,tableBody=row.parentNode,allRows=tableBody.childNodes,rowIndex=1;while(rowIndex<allRows.length&&allRows[rowIndex]!=row)rowIndex++;rowIndex>1&&(tmp=allRows[rowIndex],tableBody.removeChild(allRows[rowIndex]),tableBody.insertBefore(tmp,allRows[rowIndex-1])),setRowClasses(tableBody.parentNode,!0)}function moveThisCellsRowDown(a){row=a.parentNode.parentNode,tableBody=row.parentNode,allRows=tableBody.childNodes,rowIndex=1;while(rowIndex<allRows.length&&allRows[rowIndex]!=row)rowIndex++;rowIndex<allRows.length-1&&allRows.length>2&&(tmp=allRows[rowIndex+1],tableBody.removeChild(allRows[rowIndex+1]),tableBody.insertBefore(tmp,allRows[rowIndex])),setRowClasses(tableBody.parentNode,!0)}function getTableDataArray(a,b,c){numEmptyCells=(b?1:0)+(c?2:0),data=new Array,rows=a.rows,rowIndex=0;while(rowIndex<rows.length){row=rows[rowIndex];if(row.firstChild.tagName.toLowerCase()=="td"){rowData=new Array,cells=row.childNodes,numCells=row.childNodes.length-numEmptyCells,cellNum=0;while(cellNum<numCells)cellContent=cells[cellNum].firstChild,typeof cellContent.data=="string"?rowData.push(cells[cellNum].firstChild.data):rowData.push(cellContent),cellNum++;data.push(rowData)}rowIndex++}return data}function setRowClasses(a,b){rows=a.rows,rows[0].className=b==1?"header_row":"disabled_header_row",rowIndex=1;while(rowIndex<rows.length){b==1?rows[rowIndex].className=rowIndex%2==0?"even":"odd":rows[rowIndex].className=rowIndex%2==0?"disabled_even":"disabled_odd",cells=rows[rowIndex].childNodes;for(cellIndex=0;cellIndex<cells.length;cellIndex++)cellContent=cells[cellIndex].firstChild,cellContent.type=="button"&&(cellContent.disabled=b==0,cellContent.className=b==0?"default_button_disabled":"default_button");rowIndex++}tableSanityCheck(a)}function tableSanityCheck(a){a.style.display=a.rows.length<2?"none":"block"};